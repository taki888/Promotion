!function(){app.controller("noticeDialog",["$scope","http",function(t,n){t.notice={gg_content:""},t.ngDialogData&&(t.notice=t.ngDialogData),t.sub=function(){t.loading||(t.loading=!0,n.post("api/gg_add.php",t.notice,function(n){t.loading=!1,0==n.error?t.closeThisDialog(n):(t.error=!0,t.errorMsg=n.msg)}))}}]),app.controller("notice",["$scope","$rootScope","Table","ngDialog","http",function(t,n,o,e,i){n.patchName="notice",t.table=o.init({link:"api/gg_list.php",query:{pagesize:999}}),t.table.getList(),t.change={count:null,setting:!1,setCount:function(){var t=this;t.loading||(t.loading=!0,i.get("api/ok_num.php",{num:t.count},function(n){t.loading=!1,0==n.error?(t.setting=!1,n.num&&(t.count=n.num)):(t.error=!0,t.errorMsg=n.msg)}))},delList:function(){e.open({template:'<div class="confirm-dialog">                 <h2>您确定要清空全部成功办理记录吗？</h2>                <div align="center">                    <button type="button" class="btn-red" ng-click="closeThisDialog(\'CONFIRM\')">确定</button>                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>                </div></div>',plain:!0}).closePromise.then(function(t){t.value&&"CONFIRM"==t.value&&i.get("api/ok_num.php",{del:1},function(t){})})}},t.change.setCount(),t.addNotice=function(){e.open({template:"template/noticeDialog.html",controller:"noticeDialog"}).closePromise.then(function(n){n.value&&0==n.value.error&&t.table.getList()})},t.editNotice=function(n){e.open({template:"template/noticeDialog.html",controller:"noticeDialog",data:n}).closePromise.then(function(n){n.value&&0==n.value.error&&t.table.getList()})},t.delNotice=function(n){e.open({template:'<div class="confirm-dialog">                 <h2>您确定要删除此公告吗？</h2>                <div align="center">                    <button type="button" class="btn-red" ng-click="closeThisDialog(\'CONFIRM\')">确定</button>                    <button type="button" class="btn" ng-click="closeThisDialog()">取消</button>                </div></div>',plain:!0}).closePromise.then(function(o){o.value&&"CONFIRM"==o.value&&i.post("api/gg_del.php",{gg_id:n.gg_id},function(n){0==n.error&&t.table.getList()})})},t.changeNotice=function(n,o){i.get("api/gg_status.php",{gg_id:n.gg_id,gg_status:o},function(t){0==t.error&&(n.gg_status=o)}),t.table.list.forEach(function(t){if(t.gg_status==o)return i.get("api/gg_status.php",{gg_id:t.gg_id,gg_status:Math.abs(o-1)},function(n){0==n.error&&(t.gg_status=Math.abs(o-1))}),!1})}}])}();