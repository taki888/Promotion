var app=angular.module("app",["nav","user"]).config(["$provide","$compileProvider","$controllerProvider","$filterProvider","$httpProvider",function(e,t,r,n,c){app.controller=r.register,app.directive=t.directive,app.filter=n.register,app.factory=e.factory,app.service=e.service,app.constant=e.constant,c.defaults.transformRequest.push(function(e){if(e&&"string"==typeof e){e=JSON.parse(e);var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}}),c.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"}]);app.directive("checkAll",function(){return{restrict:"AE",link:function(e,t,r,n){$(document).on("change","."+r.checkAll,function(){if(e.$apply(function(){e[r.ngModel]=!1}),$(this).prop("checked"))e[r.checkValue].push($(this).val());else{var t=$(this);e[r.checkValue]=e[r.checkValue].filter(function(e){return e!=t.val()})}}),t.on("change",function(){var t=$("."+r.checkAll+":enabled");$(this).prop("checked")?(t.prop("checked",!0),e[r.checkValue]=[],t.each(function(t,n){e[r.checkValue].push($(n).val())})):(t.prop("checked",!1),e[r.checkValue]=[])})}}}),app.factory("http",["$http",function(e){function t(){}return t.prototype.get=function(t,r,n){e({url:t,params:r,method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){var t=e.data;n(t)}).catch(function(e){n({error:e.status,msg:"接口错误"})})},t.prototype.post=function(t,r,n){e({url:t,data:JSON.stringify(r),method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){var t=e.data;n(t)}).catch(function(e){n({error:e.status,msg:"接口错误"})})},new t}]);